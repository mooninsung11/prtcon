<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PetConnect</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background-color: #fff8e7;
    }

    /* HEADER */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 50px;
      background: white;
      position: fixed;
      top: 0;
      width: 100%;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      z-index: 100;
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: 30px;
    }

    nav ul li {
      position: relative;
    }

    nav ul li {
  position: relative;
}

nav ul li:hover > ul {
  display: block;
}

nav ul li ul {
  display: none;
  position: absolute;
  top: 30px;
  left: 0;
  background: #333;
  color: #fff;
  padding: 10px;
  z-index: 1000;
  min-width: 120px;
}

nav ul li ul li {
  padding: 5px 15px;
  white-space: nowrap;
}

nav ul li ul li:hover {
  background: #555;
}


nav ul li ul {
  display: none;
  position: absolute;
  top: 30px;
  left: 0;
  background: #333;
  color: #fff;
  padding: 10px;
  z-index: 1000;
  min-width: 120px;
}


    nav ul li ul li {
      padding: 5px 15px;
    }

    nav ul li ul li:hover {
      background: #555;
    }

    .auth {
      display: flex;
      gap: 20px;
      margin-right: 60px;
    }

    .auth a {
      text-decoration: none;
      color: #333;
      font-weight: bold;
      line-height: 1;
    }

    /* SLIDER */
    .slider {
      margin-top: 90px;
      width: 100%;
      overflow: hidden;
      position: relative;
    }

    .slides {
      display: flex;
      transition: transform 0.5s ease-in-out;
    }

    .slide {
      min-width: 100%;
    }

    .slide img {
      width: 100%;
      height: auto;
      display: block;
    }

    .slider-buttons {
      position: absolute;
      top: 50%;
      width: 100%;
      display: flex;
      justify-content: space-between;
      transform: translateY(-50%);
    }

    .slider-buttons button {
      background: rgba(255,255,255,0.7);
      border: none;
      font-size: 24px;
      padding: 10px;
      cursor: pointer;
    }

    /* CARD SECTION */
    .card-section {
      display: flex;
      justify-content: center;
      gap: 30px;
      padding: 40px;
      background: #fff;
    }

    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      width: 250px;
      text-align: center;
      padding: 20px;
    }

    .card img {
      width: 60px;
      height: 60px;
    }

    .card h3 {
      margin: 15px 0 10px;
      font-size: 18px;
      color: #444;
    }

    .card p {
      font-size: 14px;
      color: #777;
    }

    @media (max-width: 768px) {
      .card-section {
        flex-direction: column;
        align-items: center;
      }
    }
    .modal {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 999;
}

.modal.hidden {
  display: none;
}

.modal-content {
  background: #fff;
  padding: 30px;
  border-radius: 12px;
  width: 300px;
  text-align: center;
}

.modal-content input {
  width: 90%;
  margin: 10px 0;
  padding: 8px;
}

.modal-content button {
  margin-top: 10px;
  padding: 8px 15px;
  cursor: pointer;
}

.close {
  float: right;
  font-size: 24px;
  font-weight: bold;
  cursor: pointer;
}
.card-link {
  text-decoration: none;
  color: inherit;
}

.card-link:hover .card {
  transform: scale(1.05);
  box-shadow: 0 4px 20px rgba(0,0,0,0.15);
  transition: all 0.3s;
}
nav ul {
  list-style: none;
  display: flex;
  gap: 30px;
  position: relative;
}

nav ul li {
  position: relative;
  cursor: pointer;
}

.dropdown-menu {
  display: none;
  position: absolute;
  top: 30px;
  left: 0;
  background: white;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  padding: 10px 0;
  min-width: 160px;
  z-index: 1000;
  flex-direction: column;
}

.dropdown-menu li {
  padding: 8px 20px;
  white-space: nowrap;
}

.dropdown-menu li a {
  text-decoration: none;
  color: #333;
  font-size: 14px;
}

.dropdown-menu li a:hover {
  background-color: #f8f8f8;
}

.dropdown:hover .dropdown-menu {
  display: flex;
  flex-direction: column;
}
/* ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ê¸°ë³¸ ìˆ¨ê¹€ */
.dropdown-menu {
  display: none;
  position: absolute;
  top: 30px;
  left: 0;
  background: white;
  padding: 10px 0;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  z-index: 9999; /* âœ… ê°€ì¥ ì¤‘ìš”: ë©”ë‰´ê°€ ìœ„ë¡œ ì˜¬ë¼ì˜¤ê²Œ í•¨ */
  min-width: 150px;
}

/* ë“œë¡­ë‹¤ìš´ hover ìœ ì§€ ë° ë‚´ë¶€ í´ë¦­ í—ˆìš© */
.dropdown:hover .dropdown-menu,
.dropdown-menu:hover {
  display: block;
}

/* ë©”ë‰´ í•­ëª© ìŠ¤íƒ€ì¼ */
.dropdown-menu li {
  padding: 8px 20px;
  color: black;
}

.dropdown-menu li:hover {
  background: #f1f1f1;
}

.dropdown-menu li a {
  text-decoration: none;
  color: black;
  display: block;
}
.dropdown-menu {
  display: none;
  position: absolute;
  top: 30px;
  left: 0;
  background: white;
  padding: 10px 0;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  z-index: 9999;
  min-width: 160px;
}

.dropdown-menu li {
  padding: 8px 20px;
}

.dropdown-menu li a {
  text-decoration: none;
  color: #333;
  display: block;
}

.dropdown-menu li:hover {
  background-color: #f1f1f1;
}

.dropdown:hover .dropdown-menu,
.dropdown-menu:hover {
  display: block;
}


  </style>
</head>
<body>

  <!-- í—¤ë” -->
  <header>
   <a href="petcon.html">
  <img src="petconnect.png.png" alt="PetConnect ë¡œê³ " width="50">
</a>

    <nav>
      <ul>
        <li class="dropdown">ì¹´í…Œê³ ë¦¬
          <ul class="dropdown-menu">
            <li><a href="food.html">ì‚¬ë£Œ</a></li>
            <li><a href="snack.html">ê°„ì‹</a></li>
            <li><a href="goods.html">ìš©í’ˆ</a></li>
          </ul>
        </li>
        <li class="dropdown">ì˜ë£Œ ë° í¸ì˜ì‹œì„¤
          <ul class="dropdown-menu">
            <li><a href="hospital.html">ì˜ë£Œ ì‹œì„¤</a></li>
            <li><a href="places.html">ë°˜ë ¤ê²¬ ë™ë°˜ì‹œì„¤</a></li>
          </ul>
        </li>
      </ul>
    </nav>
    <div class="auth">
      <a href="#" onclick="openModal()">LOGIN</a>
      <a href="register.html">JOIN</a>
      <a href="mypage.html">MYPAGE</a>
      <a href="#" onclick="openCart()">CART ğŸ›’</a>
<div id="payment-modal" class="modal hidden">
  <div class="modal-content">
    <span class="close" onclick="closePayment()">&times;</span>
    <h2>ğŸ’³ ê²°ì œ ì§„í–‰</h2>
    <p id="purchase-item-name" style="margin-bottom: 15px;"></p>

    <label for="payment-method">ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ:</label><br>
    <select id="payment-method" style="margin: 10px 0; padding: 5px; width: 90%;">
      <option value="">-- ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ --</option>
      <option value="card">ğŸ’³ ì‹ ìš©ì¹´ë“œ</option>
      <option value="kakao">ğŸ“± ì¹´ì¹´ì˜¤í˜ì´</option>
      <option value="naver">ğŸŸ¢ ë„¤ì´ë²„í˜ì´</option>
      <option value="bank">ğŸ¦ ê³„ì¢Œì´ì²´</option>
    </select><br>

    <button onclick="completePayment()">ê²°ì œí•˜ê¸°</button>
  </div>
</div>
    </div>
  </header>

  <!-- ìŠ¬ë¼ì´ë” -->
  <div class="slider">
    <div class="slides" id="slides">
      <div class="slide"><img src="main1.png.png" alt="ë°°ë„ˆ1"></div>
      <div class="slide"><img src="main3.png.png" alt="ë°°ë„ˆ3"></div>
    </div>
    <div class="slider-buttons">
      <button onclick="prevSlide()">â€¹</button>
      <button onclick="nextSlide()">â€º</button>
    </div>
  </div>

  <!-- ì¹´ë“œ ì„¹ì…˜ -->
  <!-- ì¹´ë“œ ì„¹ì…˜ -->
  <div class="card-section" id="card-section">
    <a href="food.html" class="card-link">
      <div class="card">
        <img src="ì‚¬ë£Œ.png" alt="ì‚¬ë£Œ ì•„ì´ì½˜" />
        <h3>ê°•ì•„ì§€ ì‚¬ë£Œ</h3>
        <p>ê±´ê°•í•œ ì‚¬ë£Œë¥¼ ì¶”ì²œí•´ë“œë ¤ìš”.</p>
      </div>
    </a>
    <a href="snack.html" class="card-link">
    <div class="card">      
      <img src="ê°„ì‹.png" alt="ê°„ì‹ ì•„ì´ì½˜" />
      <h3>ê°•ì•„ì§€ ê°„ì‹</h3>
      <p>ê±´ê°•í•˜ê³  ë§›ìˆëŠ” ê°„ì‹ì„ ì¶”ì²œí•´ë“œë ¤ìš”.</p>
    </div>
  </a>
    <a href="goods.html" class="card-link">
      <div class="card">
        <img src="goods.png" alt="ìš©í’ˆ ì•„ì´ì½˜" />
        <h3>ê°•ì•„ì§€ ìš©í’ˆ</h3>
        <p>ì•ˆì‹¬í•˜ê³  ì‚¬ìš©í•˜ëŠ” ìš©í’ˆì„ ì¶”ì²œí•´ë“œë ¤ìš”.</p>
      </div>
    </a>
    <a href="places.html" class="card-link">
      <div class="card">
        <img src="ë™ë°˜ê°€ëŠ¥.png" alt="ë™ë°˜ì‹œì„¤ ì•„ì´ì½˜" />
        <h3>ë°˜ë ¤ê²¬ ë™ë°˜ì‹œì„¤</h3>
        <p>í•¨ê»˜ ê°ˆ ìˆ˜ ìˆëŠ” ì¥ì†Œë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
      </div>
    </a>
    <a href="hospital.html" class="card-link">
      <div class="card">
        <img src="hospital.png.png" alt="ë³‘ì› ì•„ì´ì½˜" />
        <h3>ì˜ë£Œì‹œì„¤</h3>
        <p>ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë™ë¬¼ë³‘ì›ì„ ì†Œê°œí•©ë‹ˆë‹¤.</p>
      </div>
    </a>
    
  </div>
  

  <script>
    // ì¥ë°”êµ¬ë‹ˆ ê´€ë ¨ ë¡œì§
let cart = [];

// ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆ ì¶”ê°€ í•¨ìˆ˜
function addToCart(product) {
  cart.push(product);
  alert(`ğŸ›’ "${product}"ê°€ ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`);
}

// ì¥ë°”êµ¬ë‹ˆ ì—´ê¸°
function openCart() {
  const cartList = document.getElementById("cart-list");
  cartList.innerHTML = "";

  if (cart.length === 0) {
    cartList.innerHTML = "<li>ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.</li>";
  } else {
    cart.forEach(item => {
      const li = document.createElement("li");
      li.textContent = "â€¢ " + item;
      cartList.appendChild(li);
    });
  }

  document.getElementById("cart-modal").classList.remove("hidden");
}

// ì¥ë°”êµ¬ë‹ˆ ë‹«ê¸°
function closeCart() {
  document.getElementById("cart-modal").classList.add("hidden");
}

// ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°
function clearCart() {
  cart = [];
  openCart();
}
let currentProduct = "";

function purchaseProduct(product) {
  currentProduct = product;
  document.getElementById('purchase-item-name').innerText = `\"${product}\" ìƒí’ˆì„ êµ¬ë§¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`;
  document.getElementById('payment-modal').classList.remove('hidden');
}

function closePayment() {
  document.getElementById('payment-modal').classList.add('hidden');
  document.getElementById('payment-method').value = "";
}

function completePayment() {
  const method = document.getElementById("payment-method").value;
  if (!method) {
    alert("âš  ê²°ì œ ìˆ˜ë‹¨ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
    return;
  }

  // ì‹¤ì œ API í˜¸ì¶œ (ë°±ì—”ë“œ ê²°ì œ ì²˜ë¦¬ + ì£¼ë¬¸ DB ê¸°ë¡)
  fetch("http://localhost:5000/api/order", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      product: currentProduct,
      method: method,
      timestamp: new Date().toISOString()
    })
  })
  .then(res => res.json())
  .then(data => {
    if (data.success) {
      alert(`âœ… ì£¼ë¬¸ ì™„ë£Œ! ì£¼ë¬¸ë²ˆí˜¸: ${data.order_id}`);
    } else {
      alert("âŒ ì£¼ë¬¸ ì‹¤íŒ¨: " + data.message);
    }
    closePayment();
  })
  .catch(err => {
    alert("âŒ ì„œë²„ ì˜¤ë¥˜ ë°œìƒ: ê²°ì œë¥¼ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
  });
}

async function sendChat() {
  const input = document.getElementById('chat-input');
  const chatlog = document.getElementById('chatlog');
  const userText = input.value.trim();
  if (!userText) return;

  chatlog.innerHTML += `<div><strong>ğŸ™‹â€â™‚ï¸ ì‚¬ìš©ì:</strong> ${userText}</div>`;
  input.value = "";

  try {
    const response = await fetch("http://127.0.0.1:5000/chat", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ message: userText })
    });

    const data = await response.json();
    if (data.response) {
      chatlog.innerHTML += `<div><strong>ğŸ¤– í«ì±—:</strong> ${data.response}</div>`;
    } else {
      chatlog.innerHTML += `<div><strong>âš ï¸ í«ì±—:</strong> ì‘ë‹µì´ ì—†ìŠµë‹ˆë‹¤.</div>`;
    }
    chatlog.scrollTop = chatlog.scrollHeight;

  } catch (error) {
    chatlog.innerHTML += `<div><strong>âŒ í«ì±—:</strong> ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”.</div>`;
  }
}



    let currentIndex = 0;
    const slides = document.getElementById("slides");
    const totalSlides = slides.children.length;

    function showSlide(index) {
      slides.style.transform = `translateX(-${index * 100}%)`;
    }

    function nextSlide() {
      currentIndex = (currentIndex + 1) % totalSlides;
      showSlide(currentIndex);
    }

    function prevSlide() {
      currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
      showSlide(currentIndex);
    }

    setInterval(nextSlide, 4000);
    function openModal() {
  document.getElementById('modal').classList.remove('hidden');
}

function closeModal() {
  document.getElementById('modal').classList.add('hidden');
}
// ì¹´ë“œ ì •ë³´ JSONìœ¼ë¡œ ë¶ˆëŸ¬ì˜¤ê¸°
fetch('data.json')
  .then(res => res.json())
  .then(data => {
    const container = document.getElementById('card-section');
    container.innerHTML = data.map(card => `
      <div class="card">
        <img src="${card.img}" alt="${card.title}">
        <h3>${card.title}</h3>
        <p>${card.desc}</p>
      </div>
    `).join('');
  });
 
  // ë¡œê·¸ì¸
  function login() {
    const username = document.getElementById('login-username').value.trim();
    const password = document.getElementById('login-password').value.trim();

    console.log("[DEBUG] ë¡œê·¸ì¸ ì‹œë„:", username, password);

    fetch('http://127.0.0.1:5000/api/login', {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ username, password })
    })
    .then(res => {
      console.log("[DEBUG] ì‘ë‹µ ìƒíƒœ:", res.status);
      return res.json();
    })
    .then(data => {
      console.log("[DEBUG] ë¡œê·¸ì¸ ì‘ë‹µ:", data);
      if (data.success) {
        // 1) localStorageì— ì €ì¥
        localStorage.setItem('username', data.username);
        // 2) UI ì¬ë Œë”
        renderAuth();
        // 3) ëª¨ë‹¬ ë‹«ê¸°
        closeModal();
      } else {
        alert(`âŒ ë¡œê·¸ì¸ ì‹¤íŒ¨: ${data.message}`);
      }
    })
    .catch(err => {
      console.error("[ERROR] ë¡œê·¸ì¸ ì¤‘ ì˜ˆì™¸:", err);
      alert("ì„œë²„ ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
    });
  }

  // auth ì˜ì—­ ë Œë”ë§
  function renderAuth() {
    const auth = document.querySelector('.auth');
    const username = localStorage.getItem('username');
    if (username) {
      auth.innerHTML = `
        
        <a href="#" onclick="logout()">LOGOUT</a>
        <a href="mypage.html">MYPAGE</a>
        <a href="#" onclick="openCart()">CART ğŸ›’</a>
      `;
    } else {
      auth.innerHTML = `
        <a href="#" onclick="openModal()">LOGIN</a>
        <a href="register.html">JOIN</a>
        <a href="mypage.html">MYPAGE</a>
        <a href="#" onclick="openCart()">CART ğŸ›’</a>
      `;
    }
  }

  // ë¡œê·¸ì•„ì›ƒ
  function logout() {
    localStorage.removeItem('username');
    renderAuth();
  }

  // í˜ì´ì§€ ë¡œë“œ ì‹œ ìƒíƒœ í™•ì¸
  document.addEventListener('DOMContentLoaded', renderAuth);

  function toggleChatbot() {
  const box = document.getElementById('chatbot-box');
  const btn = document.getElementById('chat-toggle-btn');
  if (box.style.display === 'none' || box.style.display === '') {
    box.style.display = 'flex';
    btn.style.display = 'none';
  } else {
    box.style.display = 'none';
    btn.style.display = 'block';
  }
}

// í˜ì´ì§€ ì§„ì…ì‹œ ì±—ë´‡ì€ ì¼œì ¸ ìˆê³ , ë‹«ìœ¼ë©´ ì—´ê¸° ë²„íŠ¼ ë…¸ì¶œ
window.onload = function() {
  document.getElementById('chatbot-box').style.display = 'flex';
  document.getElementById('chat-toggle-btn').style.display = 'none';
};
</script>




<!-- ì¥ë°”êµ¬ë‹ˆ ëª¨ë‹¬ -->
<!-- ì¥ë°”êµ¬ë‹ˆ ëª¨ë‹¬ -->
<div id="cart-modal" class="modal hidden">
  <div class="modal-content">
    <span class="close" onclick="closeCart()">&times;</span>
    <h2>ğŸ›’ ì¥ë°”êµ¬ë‹ˆ</h2>
    <ul id="cart-list" style="text-align: left; padding: 0; list-style: none;"></ul>
    <button onclick="clearCart()">ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°</button>
    <!-- âœ… ê²°ì œ ë²„íŠ¼ ì¶”ê°€ -->
    <button onclick="purchaseCart()">ğŸ›’ ê²°ì œí•˜ê¸°</button>
  </div>
</div>



<!-- GPT ì±—ë´‡ UI -->
<div id="chatbot-box" style="
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 500px;
  height: 400px;
  background: white;
  border-radius: 12px;
  border: 1px solid #ccc;
  box-shadow: 0 0 15px rgba(0,0,0,0.3);
  padding: 16px;
  font-family: Arial, sans-serif;
  z-index: 9999;
  display: flex;
  flex-direction: column;
">

  <!-- âœ… ìƒë‹¨ë°”ì— ì œëª© + ë‹«ê¸° ë²„íŠ¼ -->
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
    <strong style="font-size: 16px;">ğŸ¶ í«ì±—</strong>
    <button onclick="toggleChatbot()" style="
      background: none;
      border: none;
      font-size: 20px;
      font-weight: bold;
      cursor: pointer;
    ">&times;</button>
  </div>

  <!-- ì±„íŒ… ë¡œê·¸ -->
  <div id="chatlog" style="
    flex: 1;
    overflow-y: auto;
    font-size: 15px;
    margin-bottom: 10px;
    padding: 10px;
    border: 1px solid #eee;
    border-radius: 8px;
    background-color: #fafafa;
  "></div>

  <!-- ì…ë ¥ì°½ -->
  <input type="text" id="chat-input" placeholder="ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”!" style="
    padding: 10px;
    font-size: 15px;
    border: 1px solid #aaa;
    border-radius: 6px;
    outline: none;
  " onkeydown="if(event.key==='Enter') sendChat()" />
</div>


<!-- ë¡œê·¸ì¸/íšŒì›ê°€ì… ëª¨ë‹¬ -->
<!-- ë¡œê·¸ì¸/íšŒì›ê°€ì… ëª¨ë‹¬ -->
<div id="modal" class="modal hidden">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <h2>ë¡œê·¸ì¸</h2>
    
    <!-- ğŸ”’ ID ì¶”ê°€: JSì—ì„œ ê°’ ì½ì–´ì˜¤ë„ë¡ -->
    <input type="text" id="login-username" placeholder="ì•„ì´ë””"><br>
    <input type="password" id="login-password" placeholder="ë¹„ë°€ë²ˆí˜¸"><br>

    <!-- âœ… JS í•¨ìˆ˜ ì—°ê²° -->
    <button onclick="login()">ë¡œê·¸ì¸</button>
  </div>
</div>
<!-- âœ… ì±—ë´‡ ì—´ê¸° ë²„íŠ¼ -->
<button id="chat-toggle-btn" onclick="toggleChatbot()" style="
  position: fixed;
  bottom: 20px;
  right: 20px;
  padding: 10px 15px;
  font-size: 14px;
  border-radius: 8px;
  border: none;
  background: #333;
  color: white;
  cursor: pointer;
  display: none;
  z-index: 10000;
">ğŸ’¬ ì±—ë´‡ ì—´ê¸°</button>

</body>
</html>
